    const data = {
      demo1: {
        label: "30th May 2025 - Shift 1",
        hindi: {
          passage: `अनोखी चिकित्सा \n\n मुकुल मधुकर पटना में रहने वाले एक नाटककार थे। चूंकि उन्होंने चिकित्सा का भी अध्ययन किया था, इसलिए उनको जानने वाले उन्हें डॉ. मधुकर बुलाते थे। उनके नाटक बहुत लोकप्रिय नहीं थे और उन्होंने ज्यादा कमाई नहीं की। एक डॉक्टर के रूप में उन्होंने शायद ही उन मरीजों से कोई शुल्क लिया था जो ज्यादातर गरीब थे। वह बहुत दयालु व्यक्ति थे और हमेशा गरीबों और जरूरतमंदों की मदद करने के लिए तैयार रहते थे। इसलिए, उनके पास आमतौर पर स्वयं के लिए बहुत कम पैसे होते थे। \n\n एकदिन फटे कपड़े पहरी हुई एक गरीब महिला ने डॉ. मधुकर को बुलाया। उसने उनसे उसके साथ घर चलने और अपने पति की जाँच करने का अनुरोध किया जो बहुत बीमार था। वह कुछ समय से बिस्तर पर पड़ा था और चलने में असमर्थ था। जब मधुकर ने परिवार से मुलाकात की, तो वह परिवार की दयनीय स्थिति देखकर परेशान हुआ। पति कई महीनों तक काम से दूर था और घर में शायद ही कोई खाना था। मधुकर ने रोगी की जाँच की और महिला से शाम को उससे मिलने को कहा। \n\n जब महिला शाम को मधुकर के घर आई, तो उसने उसे एक छोटा लेकिन भारी धातु बॉक्स दिया और कहा, "आपके पति के लिए दवा लीजिए। यदि आप इसे नियमित रूप से उपयोग करेंगी, तो वह शीघ्र ही ठीक हो जाएगा। वह पहले की तरह कार्य करने में सक्षम होगा। लेकिन जब तक आप घर नहीं पहुँच जाती हो तब तक आपको दवा का बॉक्स नहीं खोलना चाहिए।" \n\n "दवा कैसे लेनी है?" गरीब महिला ने पूछा। डॉ. मधुकर ने कहा, "आपको बॉक्स के अंदर कागज़ का एक छोटा सा टुकड़ा मिलेगा जिसमें दवा का उपयोग करने के लिए सभी निर्देश शामिल हैं।" \n\n महिला ने डॉक्टर का धन्यवाद किया और दवा के बॉक्स के साथ घर पहुँची। घर पहुँचने पर, वह अपने पति के बगल में बिस्तर पर बैठ गई। फिर उसने बॉक्स को ध्यान से खोला। वह सिक्के से भरा बॉक्स पाने पर हैरान थी। पैसो के ऊपर कागज़ का एक टुकड़ा था जिसमें लिखा थाः "जब भी आपको आवश्यकता महसूस हो तो कृपया इस दवा का उपयोग करें।"`,
          questions: [
           {
    "q": "डॉ. मधुकर के पास पैसो की कमी क्यों थी?",
    "options": [
      "1. क्योंकि उन्होंने ज्यादा कमाई नहीं की।",
      "2. क्योंकि उन्होंने नाटक लिखने पर पैसा बर्बाद कर दिया।",
      "3. क्योंकि जो भी पैसा उनके पास था वह उन्होंने जरूरतमंदों की मदद के लिए दिया।",
      "4. क्योंकि उन्होंने अपने मरीजों से कभी कोई शुल्‍क नहीं लिया।"
    ],
    "answer": 2
  },
  {
    "q": "डॉ. मधुकर रोगी के घर उसकी जाँच करने के लिए गए क्योंकि :",
    "options": [
      "1. वह एक अमीर आदमी था।",
      "2. वह बिस्‍तर पर पड़े रेहने वाला व्‍यक्ति था।",
      "3. वह बहुत दूर रहता था।",
      "4. वह बहुत गरीब था।"
    ],
    "answer": 1
  },
  {
    "q": "रोगी की दयनीय स्थिति के लिए कारण क्या था?",
    "options": [
      "1. उसकी पत्नी को उसकी जांच के लिए कोई डॉक्‍टर नहीं मिला।",
      "2. वे बहुत गरीब थे इसलिए डॉक्‍टर द्वारा निर्धारित दवा खरीद नहीं सकते थे।",
      "3. वह कई महीनों से बीमार था और चल-फिर नहीं सकता था।",
      "4. वह बेरोजगार था और उसके पास खाना खरीदने के लिए भी पैसे नहीं थे।"
    ],
    "answer": 3
  },
  {
    "q": "डॉ. मधुकर एक ______ आदमी थे।",
    "options": [
      "1. उदार",
      "2. लालची",
      "3. चालाक",
      "4. घमंडी"
    ],
    "answer": 0
  },
  {
    "q": "निम्‍नलिखित में से कौन-सा विकल्‍प कहानी का सही अनुक्रम देता है?\na. गरीब रोगी की दयनीय हालत देखकर डॉक्‍टर परेशान हो गए।\nb. डॉक्‍टर ने गरीब मरीज की पत्नी को दवा का बॉक्‍स दिया और उसे नियमित रूप से इस्तेमाल करने को कहा।\nc. चूंकि डॉ. मधुकर के ज्यादातर मरीज गरीब थे, उन्होंने उनसे शायद ही कोई शुल्‍क लिया था।\nd. डॉक्‍टर ने महिला को जो दवा दी थी वह पैसे थे।",
    "options": [
      "1. dbca",
      "2. acbd",
      "3. cabd",
      "4. dabc"
    ],
    "answer": 3
  }
          ]
        },
        english: {
          passage: `The Unique Medicine\n\nMukul Madhukar was a playwright living in Patna. Since he had studied medicine as well, he was called Dr. Madhukar by those who knew him. His plays were not very popular and he did not earn much. As a doctor he hardly charged any fee from his patients who were mostly poor. He was a very kind-hearted man and was always willing to help the poor and the needy. So, he was usually left with very little money for himself.\n\nOne day a poor woman dressed in rags called upon Dr. Madhukar. She requested him to come home with her and examine her husband who was very sick. He had been bedridden for some time and was unable to move. When Madhukar called on the family, he was distressed to see the miserable condition of the family. The husband had been out of work for many months and there was hardly any food in the house. Madhukar examined the patient and asked the woman to see him in the evening.\n\nWhen the woman came to Madhukar’s house in the evening, he gave her a small but heavy metal box and said, “Here is the medicine for your husband. If you use it regularly, he will soon get well. He will be able to work again as before. But you must not open the medicine box until you get home.”\n\n“How is the medicine to be taken?” asked the poor woman. “ You will find a small piece of paper inside the box which contains all the directions for using the medicine, “ said Dr. Madhukar. The woman thanked the doctor and rushed home with the box of medicine. On reaching home, she sat down on the bed beside her husband. Then she opened the box carefully. She was surprised to find the box full of coins. On top of the money was a piece of paper bearing the words: “ Please use this medicine whenever you feel the need.” `,
          questions: [
            { q: "Dr. Madhukar was usually short of money because he:", options: ["did not earn much.", "wasted money on writing plays.", "used whatever money he had to help the needy.", "never charged any fee from his patients."], answer: 2 },
            { q: "Dr. Madhukar went to the patient’s house to examine him because:", options: ["he was a rich man", "he was bed-ridden", "he lived far away", "he was very poor"], answer: 1 },
            { q: "What was the reason for the patient’s miserable condition?", options: ["His wife could not find a doctor to examine him.", "They were too poor to buy the medicine the doctor had prescribed.", "He had been sick for many months and could not move.", "He was unemployed and there was no money to even buy some food."], answer: 3 },
            { q: "Dr. Madhukar was a _______ man.", options: ["generous", "greedy", "cunning", "proud"], answer: 0 },
            { q: "Which of the following options gives the correct sequence of the story?\n\n a. The doctor was upset on seeing the pathetic condition of the poor patient.\n b. He gave the poor patient’s wife a box of medicine and told her to use it regularly. \n c. As Dr. Madhukar's patients were mostly poor, he hardly took any fee from them. \n d. The medicine the doctor had given the woman was money. ", options: ["dbca", "acbd", "cabd", "dabc"], answer: 2 }
          ]
        }
      },
demo2: {
        label: "30th May 2025 - Shift 2",
        hindi: {
          passage: `इस बात को जानना दिलचस्प है कि विभित्र जीव खतरे का सामना किस प्रकार से करते हैं। गिरगिट पेड़-पौधों पर निवास करने वाली एक छिपकली है जो पत्तियों और टहनियों के बीच खुद को छुपाने के लिए अपना रंग बदल सकता है। यह पृष्ठभूमि के साथ स्वयं को पूरी तरह से समायोजित कर लेता है ताकि उसे ढूंढना मुश्किल हो। पैंगोलिन के पास एक शल्की आवरण होता है जिससे उसकी पीठ ढकी होती है। मामूली खतरे की स्थिति में भी यह अपने पैरों के बीच अपने सिर को छिपा कर खुद को एक गेंद के रूप में लपेट लेता है। बिच्छू का मकड़ी कुल से गहरा संबंध है. इसके पास एक लंबी पूँछ होती है जिसके छोर पर एक डंक होता है। बिच्छू का डंक, मनुष्यों के लिए बहुत खतरनाक माना जाता है। साही मछली के शरीर पर नुकीले कांटे होते हैं। खतरे की स्थिति में यह खुद को गुब्बारे की तरह फूला लेता है और इसके कांटे खड़े हो जाते हैं। इस स्थिति में कोई भी समुद्री जानवर इस कांटेदार गेंद रूपी पिंड से सुरक्षित दूरी बनाए रखेगा। \n\nयदि हम अजीबोगरीब रक्षा तंत्र के बारे में और सोचना शुरू करते हैं. तो ऑक्टोपस का नाम सबसे पहले याद आता है। इसके पास आठ मजबूत रबड़नुमा भुजाएं होती है. जिन्हें स्पर्शक कहा जाता है। इनकी विशेषताएं किसी चमत्कार से कम नहीं होती हैं। कुछ ऑक्टोपस पानी में काली स्याही जैसा बदलनुमा धुआँ अवमुक्त करते हैं और उसमें छिप जाते हैं। ऑक्टोपस की अन्य प्रजातियां भी एक से बढ़कर एक रक्षा उपायों का प्रदर्शन करती हैं। काली स्याही जैसा बदलनुमा धुओं के अंदर छिपने के बजाय कई ऑक्टोपस एक दिशा में बदलनुमा धुआँ अवमुक्त करते हैं और अपने शिकारी को धोखा देने के लिए जल्दी से विपरीत दिशा में तैरकर भाग जाते हैं। बदलनुमा धुआँ शिकारियों में दृष्टिभ्रम उत्पन्न कर देते हैं। इसके साथ ही वे शिकारियों की गंध की भावना को भी भ्रमित कर देते हैं। इस प्रकार ऑक्टोपस का शिकार, शिकारी न तो देखकर कर सकता है और न ही उनकी गंध की सहायता से कर सकता है। \n\nऑक्टोपस स्वयं को बचाने के लिए दो और उपायों का भी प्रयोग करते हैं। ऑक्टोपस की कुछ किस्मों में अपनी त्वचा को समुद्री शैवाल या चट्टानों के रंग और बनावट के अनुरूप ढालने की क्षमता होती है जिससे वे आसपास के वातावरण जैसा दिखते हैं। कुछ ऑक्टोपस अपने अंगों का त्याग भी कर सकते हैं और बाद में उन्हें फिर से उसी प्रकार से विकसित कर सकते हैं जैसे कि एक छिपकली अपनी पूंछ को फिर से विकसित कर सकती है। यदि शिकारी उनके एक स्पर्शक को पकड़ लेता है तो ऑक्टोपस तुरंत इसे त्याग देता है और खुद को पकड़ से मुक्त कर लेता है। फिर बचने के लिए तेजी से तेरकर दूर निकल जाता है। निःसन्देह रूप से यह त्यागे गए स्पर्शक की जगह एक नए स्पर्शक का विकास कर लेता है।"`,
          questions: [
            {
    "q": "निम्‍नलिखित में से कौन-सा जीव छिपकलियों की प्रजाति से संबंधित है?",
    "options": [
      "1. मकड़ी",
      "2. गिरगिट",
      "3. ऑक्टोपस",
      "4. पैंगोलिन"
    ],
    "answer": 1
  },
  {
    "q": "निम्‍नलिखित में से क्या मनुष्यों के लिए सबसे अधिक खतरनाक है?",
    "options": [
      "1. बिच्छू का डंक",
      "2. पांगोलिन के शल्‍क",
      "3. ऑक्टोपस के स्‍पर्शक",
      "4. साही मछली के कांटे"
    ],
    "answer": 0
  },
  {
    "q": "उपरोक्‍त गद्यांश के आधार पर ऑक्टोपस के किस गुण का अनुमान लगाया जा सकता है?",
    "options": [
      "1. यह एक भ्रमित जीव होता है।",
      "2. यह आसानी से डर जाता है।",
      "3. यह अपने शिकारी को धोखा दे सकता है।",
      "4. यह एक शक्तिशाली समुद्री जीव है।"
    ],
    "answer": 2
  },
  {
    "q": "निम्‍न में से कौन-सा एक तरीका, ऑक्टोपस के रक्षा तंत्र का हिस्सा नहीं है?",
    "options": [
      "1. त्‍वचा का रंग बदलना",
      "2. अंग को त्यागना",
      "3. स्याही जैसा बादलनुमा धुआँ अवमुक्‍त करना",
      "4. त्यागे गए अंग को पुनः विकसित करना"
    ],
    "answer": 3
  },
  {
    "q": "दिए गए गद्यांश के आधार पर निम्‍न में से कौन-सा कथन सही है?",
    "options": [
      "1. ऑक्टोपस के पास छः मजबूत स्‍पर्शक होते हैं।",
      "2. ऑक्टोपस खुद को अदृश्‍य कर सकता है।",
      "3. सभी जीव समान रक्षा तंत्र का उपयोग करते हैं।",
      "4. बिच्छू का मकड़ी कुल से गहरा संबंध है।"
    ],
    "answer": 3
  }
          ]
        },
        english: {
          passage: `It is interesting to note how different creatures defend themselves when faced with danger. The chameleon is a tree lizard which can change its colour to hide itself among leaves and twigs. It blends perfectly with the background so that it becomes difficult to spot. The pangolin has overlapping scales that cover its back. At the slightest danger it tucks its head between its legs and rolls itself into a ball. The scorpion, which is closely related to the spider family, has a long jointed tail with a sting at the end. The scorpion’s sting is said to be very dangerous, particularly to humans. The porcupine fish has prickly spines over its body. In danger, it puffs itself up and the spikes stick out. Any sea animal would keep a safe distance from this ball of prickles. \n\nIf we begin to think of strange defense mechanisms, the octopus, that has eight strong rubbery arms, called tentacles, could be described as a real marvel of nature. Some octopi release a cloud of black ink into the water and hide in it. Other octopi are cleverer. Instead of hiding inside the ink cloud, they release it in one direction and swim away quickly in another direction to deceive their enemies. The ink clouds confuse the sense of sight of the predators. Also, they confuse the predators’ sense of smell. If an octopus cannot be seen or smelled, it has a very good chance of escaping an attack.\n\nThere are two other devices that the octopi use to defend themselves. Some varieties of the octopi have the ability to change their skin to the colour and texture of seaweeds or rocks allowing them to blend with their environment. Some octopi can even shed their limbs and re-grow them later just as a lizard can re-grow its tail. If a predator catches a tentacle, the octopus sheds it immediately and frees itself from its hold. Then it swims away quickly to escape. Of course, it grows another tentacle later to replace the lost one.” `,
          questions: [
            {
    "q": "Which of the following is a variety of lizard?",
    "options": [
      "1. Spider",
      "2. Chameleon",
      "3. Octopus",
      "4. Pangolin"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following is most dangerous for humans?",
    "options": [
      "1. Sting of the scorpion",
      "2. Scales of the pangolin",
      "3. Tentacles of the octopus",
      "4. Spikes of the porcupine fish"
    ],
    "answer": 0
  },
  {
    "q": "What quality of the octopus can be inferred from the passage?",
    "options": [
      "1. It is a confused creature.",
      "2. It gets frightened easily.",
      "3. It can deceive its enemies.",
      "4. It is a strong sea animal."
    ],
    "answer": 2
  },
  {
    "q": "Which of the following is NOT a defense mechanism of an octopus?",
    "options": [
      "1. Changing skin colour",
      "2. Shedding a limb",
      "3. Releasing a cloud of ink",
      "4. Re-growing a limb"
    ],
    "answer": 3
  },
  {
    "q": "Which of the following statements is true as per the given passage?",
    "options": [
      "1. The octopus has six strong tentacles.",
      "2. The octopus can make itself invisible.",
      "3. All creatures have identical defense mechanisms",
      "4. The scorpion is closely related to the spider family."
    ],
    "answer": 3
  }
          ]
        }
      }

    };

    window.onload = function () {
      const passageDate = document.getElementById("passageDate");
        const defaultOpt = document.createElement("option");
  defaultOpt.value = "";
  defaultOpt.textContent = "— कृपया दिनांक चुनें —";
  defaultOpt.disabled = true;
  defaultOpt.selected = true;
  passageDate.appendChild(defaultOpt);
      Object.keys(data).forEach(key => {
        const opt = document.createElement("option");
        opt.value = key;
        opt.textContent = data[key].label;
        passageDate.appendChild(opt);
      });
    };

let userName = "";
let selectedLang = "";
let selectedDate = "";
    function startTest() {
    userName = document.getElementById("userName").value.trim();
  selectedLang = document.getElementById("language").value;
  selectedDate = document.getElementById("passageDate").value;

      if (!userName || !selectedDate) {
        alert("कृपया नाम और दिनांक दोनों दर्ज करें");
        return;
      }

      const passageData = data[selectedDate][selectedLang];
      const container = document.getElementById("testSection");
      container.innerHTML = `
  <h3>गद्यांश:</h3>
  <div style="white-space: pre-line; margin-bottom:20px; text-align: justify;">${passageData.passage}</div>
  <form id="quizForm"></form>
  <button onclick="submitTest()">Submit</button>
`;
      const form = container.querySelector("#quizForm");

      passageData.questions.forEach((q, index) => {
        const qDiv = document.createElement("div");
        qDiv.className = "question";
        // 🟢 प्रश्न शीर्षक बनाएँ (लाइन ब्रेक सपोर्ट सहित)
  const questionTitle = document.createElement("b");
  questionTitle.innerText = `प्रश्न ${index + 1}:`;

  const questionPara = document.createElement("p");
  questionPara.innerText = q.q;
  questionPara.style.whiteSpace = "pre-line";

  const optionsDiv = document.createElement("div");
  optionsDiv.className = "options";

  q.options.forEach((opt, i) => {
    const label = document.createElement("label");
    label.innerHTML = `<input type="radio" name="q${index}" value="${i}"> ${opt}`;
    optionsDiv.appendChild(label);
  });

  qDiv.appendChild(questionTitle);
  qDiv.appendChild(questionPara);
  qDiv.appendChild(optionsDiv);
  form.appendChild(qDiv);
});

      document.getElementById("formSection").style.display = "none";
      container.style.display = "block";
    }

    function submitTest() {
   const passageData = data[selectedDate][selectedLang];
  let score = 0;

  const unanswered = [];

  passageData.questions.forEach((q, index) => {
    const selected = document.querySelector(`input[name="q${index}"]:checked`);
    const qDiv = document.querySelectorAll(".question")[index];
    if (!selected) {
      unanswered.push(qDiv);
    }
  });

  if (unanswered.length > 0) {
    alert("कृपया सभी प्रश्नों का उत्तर दें।");
    unanswered[0].scrollIntoView({ behavior: "smooth", block: "center" });
    return;
  }

  // यदि सब उत्तर दिए गए हैं, तब ही evaluation करें
  passageData.questions.forEach((q, index) => {
    const selected = document.querySelector(`input[name="q${index}"]:checked`);
    const qDiv = document.querySelectorAll(".question")[index];
    const val = parseInt(selected.value);
    if (val === q.answer) {
      selected.parentElement.classList.add("correct");
      score++;
    } else {
      selected.parentElement.classList.add("incorrect");
      qDiv.innerHTML += `<div class="correct">✔ सही उत्तर: ${q.options[q.answer]}</div>`;
    }
  });

  const container = document.getElementById("testSection");
  container.innerHTML += `
  <h3>आपने ${score}/5 सही उत्तर दिए</h3>
  <button onclick="location.reload()" style="
    background-color: #e91e63;
    color: white;
    border: none;
    padding: 12px 20px;
    margin-top: 10px;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
  ">नया टेस्ट शुरू करें</button>
`;
  const btn = container.querySelector("button[onclick='submitTest()']");
  if (btn) btn.style.display = "none";
        
// ✅ Google Sheet में केवल 4 डेटा भेजना
  const scriptURL = "https://script.google.com/macros/s/AKfycbzaSeOX0GxxdQe5CjW0rMlIvMBSwUjsgDRlemNnkoppK_6qmajoFsl9KgwbX9lf45RK/exec"; 
  const formData = new FormData();
  formData.append("name", userName);
  formData.append("date", data[selectedDate].label);
  formData.append("language", selectedLang);
  formData.append("score", `${score}/${passageData.questions.length}`);

  fetch(scriptURL, {
    method: "POST",
    body: formData
  }).then(res => console.log("Google Sheet Updated"))
    .catch(err => console.error("Error!", err));
} 
