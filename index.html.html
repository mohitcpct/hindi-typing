
<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>рд╣рд┐рдВрджреА рдЯрд╛рдЗрдкрд┐рдВрдЧ рдЯреЗрд╕реНрдЯ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      padding: 20px;
      max-width: 960px;
      margin: auto;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    #setup, #testArea, #result {
      background: #fff;
      padding: 20px;
      margin-top: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    input, select, textarea, button {
      width: 100%;
      font-size: 16px;
      padding: 10px;
      margin-top: 10px;
    }
    #displayText span.correct {
      color: green;
    }
    #displayText span.incorrect {
      color: red;
      text-decoration: underline;
    }
    #displayText {
      margin: 20px 0;
      line-height: 1.6;
      height: 180px;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    #topBar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #timer {
      font-weight: bold;
      color: #d9534f;
      font-size: 18px;
    }
  </style>
</head>
<body>

<h2>ЁЯУЭ рд╣рд┐рдВрджреА рдЯрд╛рдЗрдкрд┐рдВрдЧ рдЯреЗрд╕реНрдЯ</h2>

<div id="setup">
  <label>ЁЯСд рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ:</label>
  <input type="text" id="userName" placeholder="рдЖрдкрдХрд╛ рдирд╛рдо">

  <label>тП▒ рдкрд░реАрдХреНрд╖рдг рдЕрд╡рдзрд┐ рдЪреБрдиреЗрдВ:</label>
  <select id="timeSelect">
    <option value="">-- рдЕрд╡рдзрд┐ рдЪреБрдиреЗрдВ --</option>
    <option value="1">1 рдорд┐рдирдЯ</option>
    <option value="2">2 рдорд┐рдирдЯ</option>
    <option value="15">15 рдорд┐рдирдЯ</option>
  </select>

  <button onclick="startTest()">тЦ╢ рдЯреЗрд╕реНрдЯ рд╢реБрд░реВ рдХрд░реЗрдВ</button>
</div>

<div id="testArea" style="display:none;">
  <div id="topBar">
    <div><strong>рдЪрдпрдирд┐рдд рд╕рдордп:</strong> <span id="selectedTime"></span> рдорд┐рдирдЯ</div>
    <div id="timer">рд╢реЗрд╖ рд╕рдордп: 00:00</div>
  </div>

  <div id="displayText"></div>
  <textarea id="inputField" rows="6" placeholder="рдпрд╣рд╛рдБ рдЯрд╛рдЗрдк рдХрд░реЗрдВ..."></textarea>
  <button onclick="endTest()">ЁЯУЭ рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ</button>
</div>

<div id="result"></div>

<script>
  const originalText = `рднрд╛рд░рдд рдПрдХ рд╡рд┐рд╢рд╛рд▓ рдФрд░ рд╡рд┐рд╡рд┐рдзрддрд╛рдУрдВ рд╕реЗ рднрд░рд╛ рджреЗрд╢ рд╣реИред рдпрд╣рд╛рдБ рдХреА рд╕рдВрд╕реНрдХреГрддрд┐, рднрд╛рд╖рд╛ рдФрд░ рдкрд░рдВрдкрд░рд╛рдПрдБ рд╡рд┐рд╢реНрд╡ рдореЗрдВ рдЕрджреНрд╡рд┐рддреАрдп рд╣реИрдВред рднрд╛рд░рдд рдореЗрдВ рд╣рд░ рд░рд╛рдЬреНрдп рдХреА рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред рдпрд╣рд╛рдБ рдХреЗ рдкрд░реНрд╡-рддреНрдпреЛрд╣рд╛рд░, рднреЛрдЬрди рдФрд░ рдкрд╣рдирд╛рд╡рд╛ рднреА рдХреНрд╖реЗрддреНрд░реАрдп рд░реВрдк рд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛрддреЗ рд╣реИрдВред рд▓реЛрдХрддрд╛рдВрддреНрд░рд╛рддреНрдордХ рд╡реНрдпрд╡рд╕реНрдерд╛ рдФрд░ рд╕рдВрд╡рд┐рдзрд╛рди рднрд╛рд░рдд рдХреЛ рдПрдХ рд╕рд╢рдХреНрдд рд░рд╛рд╖реНрдЯреНрд░ рдмрдирд╛рддреЗ рд╣реИрдВред`;

  let startTime = null;
  let countdown = null;
  let timeLimit = 0;

  const displayDiv = document.getElementById("displayText");
  const inputField = document.getElementById("inputField");
  const resultDiv = document.getElementById("result");
  const timerDisplay = document.getElementById("timer");

  function renderText(input) {
    displayDiv.innerHTML = "";
    const words = originalText.split("");
    for (let i = 0; i < words.length; i++) {
      const span = document.createElement("span");
      if (i < input.length) {
        span.className = (input[i] === words[i]) ? "correct" : "incorrect";
      }
      span.innerText = words[i];
      displayDiv.appendChild(span);
    }
  }

  function startTest() {
    const name = document.getElementById("userName").value.trim();
    const duration = document.getElementById("timeSelect").value;

    if (!name) {
      alert("рдХреГрдкрдпрд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВред");
      return;
    }

    if (!duration) {
      alert("рдХреГрдкрдпрд╛ рд╕рдордп рдЪреБрдиреЗрдВред");
      return;
    }

    timeLimit = parseInt(duration);
    document.getElementById("selectedTime").innerText = timeLimit;
    document.getElementById("setup").style.display = "none";
    document.getElementById("testArea").style.display = "block";
    renderText("");
    inputField.focus();
    startTime = new Date();

    let totalSeconds = timeLimit * 60;
    updateTimerDisplay(totalSeconds);
    countdown = setInterval(() => {
      totalSeconds--;
      updateTimerDisplay(totalSeconds);
      if (totalSeconds <= 0) {
        clearInterval(countdown);
        endTest();
      }
    }, 1000);
  }

  function updateTimerDisplay(seconds) {
    const min = Math.floor(seconds / 60);
    const sec = seconds % 60;
    timerDisplay.innerText = `рд╢реЗрд╖ рд╕рдордп: ${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
  }

  inputField.addEventListener("input", () => {
    const typed = inputField.value;
    renderText(typed);
  });

  function endTest() {
    clearInterval(countdown);
    inputField.disabled = true;
    const endTime = new Date();
    const timeTaken = (endTime - startTime) / 1000 / 60;
    const wordCount = originalText.trim().split(" ").length;
    const typed = inputField.value.trim();

    let correct = 0;
    for (let i = 0; i < typed.length; i++) {
      if (typed[i] === originalText[i]) correct++;
    }

    const wpm = Math.round((typed.split(" ").length) / timeTaken);
    const accuracy = ((correct / originalText.length) * 100).toFixed(2);
    const userName = document.getElementById("userName").value.trim();

    resultDiv.innerHTML = `
      <div id="resultBox">
        <h3>тЬЕ рдкрд░реАрдХреНрд╖рдг рдкреВрд░реНрдг!</h3>
        <p><strong>рдирд╛рдо:</strong> ${userName}</p>
        <p><strong>рдЧрддрд┐:</strong> ${wpm} рд╢рдмреНрдж рдкреНрд░рддрд┐ рдорд┐рдирдЯ</p>
        <p><strong>рд╕рдЯреАрдХрддрд╛:</strong> ${accuracy}%</p>
        <p><strong>рд╕рдордп:</strong> ${timeTaken.toFixed(2)} рдорд┐рдирдЯ</p>
        <p style="text-align:center; margin-top: 20px;">
          <button onclick="location.reload()">ЁЯФБ рдЕрдиреНрдп рдЯреЗрд╕реНрдЯ рджреЗрдВ</button>
        </p>
      </div>
    `;
  }

  renderText("");
</script>

</body>
</html>
